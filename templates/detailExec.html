<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Bare - Start Bootstrap Template</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='assets/favicon.ico') }}" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{{ url_for('static',filename='css/styles.css') }}" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>

<body>
    <!-- Responsive navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">Lambda</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" aria-current="page" href="/">New scenario</a></li>
                    <li class="nav-item"><a class="nav-link active" href="../listeScenario">Execution des scenarios</a></li>
                    <li class="nav-item"><a class="nav-link" href="../createThread">Threads</a></li>
                    <li class="nav-item"><a class="nav-link" href="../createRobot">Robots</a></li>
                    <li class="nav-item"><a class="nav-link" href="../createTelephone">Phones</a></li>
                    <li class="nav-item"><a class="nav-link" href="../results">Resultats exec</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Other</a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider" />
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Page content-->

    <div class="row container-fluid">
        <div class="col-md-12 text-center mt-3">
            <h2>Scénario <b>{{ scenario.nom }}</b></h2><br><br>
            <table class="table">
                <thead>
                    <th>Temps d'exécution</th>
                    <th>Statut</th>
                    <th>Date</th>
                </thead>
                <tbody>
                    {% for m in tpsExec %}
                    <tr>
                        <td>{{ m.tps }}</td>
                        {% if m.etat == "1" %}
                        <td><button class="btn btn-success"></button></td>
                        {% else %}
                        <td><button class="btn btn-danger"></button></td>
                        {% endif %}
                        <td>{{ m.date }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <br>
            <br>
        </div>
    </div>
    <br><br>


    <div class="row">
        <div class="col-md-6">
            
            <canvas id="myChart" style="width:100%;max-width:600px"></canvas>

                <script>
                var xValues = ["Indisponibilite", "Disponibilite"];
                var yValues = ["{{ metrics.indisponibilite}}" , "{{ metrics.disponibilite}}"];
                var barColors = [
                  "#b91d47",
                  "#1e7145"
                ];

                new Chart("myChart", {
                  type: "doughnut",
                  data: {
                    labels: xValues,
                    datasets: [{
                      backgroundColor: barColors,
                      data: yValues
                    }]
                  },
                  options: {
                    title: {
                      display: true,
                      text: "Disponibilité du Scénario"
                    }
                  }
                });
                </script>
        </div>

        <div class="col-md-6">

                <canvas id="myChart1" style="width:100%;max-width:600px"></canvas>

                <script>
                const x = []
                {% for t in tpsExec %}
                    x.push({{ t.id }})
                {% endfor %}

                const y = []
                {% for t in tpsExec %}
                    y.push({{ t.tps }})
                {% endfor %}

                var xValues = x;

                var yValues = y;

                new Chart("myChart1", {
                  type: "line",
                  data: {
                    labels: xValues,
                    datasets: [{
                      fill: false,
                      lineTension: 0,
                      backgroundColor: "rgba(0,0,255,1.0)",
                      borderColor: "rgba(0,0,255,0.1)",
                      data: yValues
                    }]
                  },
                  options: {
                    legend: {display: false},
                    scales: {
                      yAxes: [{ticks: {min: 10, max:100}}],
                    }
                  }
                });
                </script>
        </div>

        <br><br>
        <div class="col-md-6">
            <canvas id="ctx" width="700"></canvas>
            <script>
                var chart = new Chart(ctx, {
               type: 'bar',
               data: {
                  labels: ['Disponibilite/Indisponibilite'], // responsible for how many bars are gonna show on the chart
                  // create 12 datasets, since we have 12 items
                  // data[0] = labels[0] (data for first bar - 'Standing costs') | data[1] = labels[1] (data for second bar - 'Running costs')
                  // put 0, if there is no data for the particular bar
                  datasets: [{
                     label: 'Disponibilite',
                     data: [{{ metrics.disponibilite }}],
                     backgroundColor: '#22aa99'
                  }, {
                     label: 'Indisponibilite',
                     data: [{{ metrics.indisponibilite }} ],
                     backgroundColor: '#994499'
                  }]
               },
               options: {
                  responsive: false,
                  legend: {
                     position: 'right' // place legend on the right side of chart
                  },
                  scales: {
                     xAxes: [{
                        stacked: true // this should be set to make the bars stacked
                     }],
                     yAxes: [{
                        stacked: true // this also..
                     }]
                  }
               }
            });
            </script>
        </div>
    </div>

</div>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="{{ url_for('static',filename='js/scripts.js') }}"></script>
</body>

</html>